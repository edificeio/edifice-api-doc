---
openapi: 3.0.0
info:
  title: Edifice - Auth - API ðŸš§ðŸš§
  description: This part represant the documentation of the Edifice api use in auth module
  version: 4.10.0
servers:
  - url: /
tags:
  - name: oauth2
    description: Authenticate using OAuth 2.0
    externalDocs:
      description: For more information
      url: "https://oauth.net/2/grant-types/authorization-code/"
  - name: auth
    description: Authenticate
  - name: cgu
    description: Conditions GÃ©nÃ©rales d'Utilisation (CGU)
  - name: authðŸš§
    description: ðŸš§ //TODO
  - name: cas
    description: ðŸš§ //TODO
  - name: openid
    description: ðŸš§ //TODO
  - name: saml
    description: ðŸš§ //TODO
paths:
  /auth/oauth2/auth:
    get:
      tags:
        - auth
      summary: Authenticate using OAuth 2.0 with Authorization Code
      parameters:
        - name: response_type
          in: query
          description: Add description
          required: false
          style: form
          explode: true
          schema:
            type: string
        - name: client_id
          in: query
          description: Add description
          required: false
          style: form
          explode: true
          schema:
            type: string
        - name: redirect_uri
          in: query
          description: Add description
          required: false
          style: form
          explode: true
          schema:
            type: string
        - name: scope
          in: query
          description: Add description
          required: false
          style: form
          explode: true
          schema:
            type: string
        - name: state
          in: query
          description: Add description
          required: false
          style: form
          explode: true
          schema:
            type: string
        - name: nonce
          in: query
          description: Add description
          required: false
          style: form
          explode: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response, redirection url with code=&state=
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/oauth2/token:
    get:
      tags:
        - oauth2
      summary: Obtain OAuth2 Token
      description: |
        Endpoint to obtain an OAuth2 token using the password grant type.
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                grant_type:
                  type: string
                  example: password
                username:
                  type: string
                  example: "{USERNAME}"
                password:
                  type: string
                  example: "{PASSWORD}"
                scope:
                  type: string
                  example: "{SCOPE}"
                client_id:
                  type: string
                  example: "{CLIENT_ID}"
                client_secret:
                  type: string
                  example: "{CLIENT_SECRET}"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  token_type:
                    type: string
                  access_token:
                    type: string
                  refresh_token:
                    type: string
                  expires_in:
                    type: integer
                  scope:
                    type: string
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  error_description:
                    type: string
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
    post:
      tags:
        - oauth2
      summary: Get OAuth Token
      parameters:
        - name: grant_type
          in: query
          description: The type of grant being used
          required: true
          schema:
            type: string
        - name: code
          in: query
          description: The authorization code received from the authorization server
          required: true
          schema:
            type: string
        - name: redirect_uri
          in: query
          description: The redirect URI used in the authorization request
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  token_type:
                    type: string
                  access_token:
                    type: string
                  refresh_token:
                    type: string
                  expires_in:
                    type: integer
                  scope:
                    type: string
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                  error_description:
                    type: string
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/context:
    get:
      tags:
        - auth
      summary: Get authentication context
      parameters:
        - name: X-Forwarded-Host
          in: header
          description: The original host requested by the client in the "Host" HTTP request header field.
          required: false
          schema:
            type: string
        - name: Host
          in: header
          description: The domain name of the server (for virtual hosting), and the TCP port number on which the server is listening.
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  callBack:
                    type: string
                  cgu:
                    type: boolean
                  passwordRegex:
                    type: string
                  mandatory:
                    type: object
                  passwordRegexI18n:
                    type: object
                    example:
                      fr: "Choisissez 8 caractÃ¨res minimum, lettres et chiffres obligatoires."
                      en: "password.errors"
                  mfaConfig:
                    type: array
                    items:
                      type: object

        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/user/requirements:
    get:
      tags:
        - auth
      summary: Get user requirements
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  forceChangePassword:
                    type: boolean
                  needRevalidateTerms:
                    type: boolean
                  needRevalidateEmail:
                    type: boolean
                  needRevalidateMobile:
                    type: boolean
                  needMfa:
                    type: boolean
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/changePassword:
    post:
      tags:
        - auth
      summary: Change user password
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                oldPassword:
                  type: string
                  description: The current password of the user.
                password:
                  type: string
                  description: The new password to set.
                confirmPassword:
                  type: string
                  description: Confirmation of the new password, should match the password field.
                login:
                  type: string
                  description: The username of the user changing the password.
                callback:
                  type: string
                  description: A URL or endpoint to redirect after the password change, usually within the same domain.
              required:
                - oldPassword
                - password
                - confirmPassword
                - login
      responses:
        "200":
          description: Password successfully changed
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Password successfully changed.
        "400":
          description: Bad Request, error in the form submission
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: object
                    properties:
                      message:
                        type: string
                        example: Le formulaire contient des erreurs. Veuillez vÃ©rifier que le nouveau mot de passe nâ€™a pas dÃ©jÃ  Ã©tÃ© utilisÃ© et que les deux saisies sont identiques.
      security:
        - cookieAuth: []
      parameters:
        - name: X-XSRF-TOKEN
          in: header
          required: true
          schema:
            type: string
            example: 7a30a76d-d48b-4d72-9b65-63ba8bbb010e
        - name: authority
          in: header
          required: true
          schema:
            type: string
            example: oneconnect.edifice.io
        - name: user-agent
          in: header
          required: true
          schema:
            type: string
            example: Mozilla/5.0 (X11; Fedora; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
        - name: x-requested-with
          in: header
          required: true
          schema:
            type: string
            example: XMLHttpRequest
        - name: content-type
          in: header
          required: true
          schema:
            type: string
            example: application/x-www-form-urlencoded; charset=UTF-8

  /auth/oauth2/userinfo:
    get:
      tags:
        - oauth2
      summary: Get User Information
      parameters:
        - name: Authorization
          in: header
          description: The access token obtained from the OAuth token endpoint
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  level:
                    type: string
                  login:
                    type: string
                  lastName:
                    type: string
                  firstName:
                    type: string
                  externalId:
                    type: string
                  username:
                    type: string
                  type:
                    type: string
                  childrenIds:
                    type: array
                    items:
                      type: string
                  uai:
                    type: array
                    items:
                      type: string
                  userId:
                    type: string
                  classId:
                    type: string
                  schoolName:
                    type: string
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
      security:
        - BearerAuth: []
        - oAuth2AuthCode:
            - userinfo
            - conversation
    post:
      tags:
        - oauth2
      summary: Return The User Information
      parameters:
        - name: Authorization
          in: header
          description: The access token obtained from the OAuth token endpoint
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  level:
                    type: string
                  login:
                    type: string
                  lastName:
                    type: string
                  firstName:
                    type: string
                  externalId:
                    type: string
                  username:
                    type: string
                  type:
                    type: string
                  childrenIds:
                    type: array
                    items:
                      type: string
                  uai:
                    type: array
                    items:
                      type: string
                  userId:
                    type: string
                  classId:
                    type: string
                  schoolName:
                    type: string
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
      security:
        - BearerAuth: []
        - oAuth2AuthCode:
            - userinfo
            - conversation
  /auth/i18n:
    get:
      tags:
        - auth
      summary: Retrieve internationalization keys for authentication
      description: Returns a JSON object containing internationalization keys and their corresponding values for authentication messages.
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              example:
                "project.name": "ENT"
                "wayf.select.profile": "Vous souhaitez vous connecter en tant que ..."
                "wayf.label.cgu": "Pour consulter la charte d'utilisation, cliquez ici"
                "activation.error": "Erreur lors de l'activation, veuillez vÃ©rifier votre identifiant et votre code d'activation."
                # ... (include all other keys and values)
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/internal/userinfo:
    get:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/activation/match:
    post:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/rest/match:
    post:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/activation/no-login:
    post:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/forgot-password:
    post:
      tags:
        - auth
      summary: Forgot password
      requestBody:
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      login:
                        type: string
                        example: 'luc.dumon'
                      service:
                        type: string
                        items:
                          type: string
                        example: 'mail'
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  message:
                    type: string
        "404":
          description: Bad request
  /auth/forgot-id:
    post:
      tags:
        - auth
      summary: Forgot Id
      requestBody:
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      firstName:
                        type: string
                        example: 'luc'
                      mail:
                        type: string
                        items:
                          type: string
                        example: 'luc@edifice.io'
                      service:
                        type: string
                        example: 'mail'
                      structureId:
                        type: string
                        items:
                          type: string
                        example: 'cbc6cb9e-ce40-45dd-91b2-ddd7529fdcaa'
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  message:
                    type: string
        "404":
          description: Bad request
  /auth/password-channels:
    get:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /auth/sendResetPassword:
    post:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/generatePasswordRenewalCode:
    post:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/massGeneratePasswordRenewalCode:
    post:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/block/{userId}:
    put:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      parameters:
        - name: userId
          in: path
          required: true
          style: simple
          explode: false
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/block:
    put:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/reset:
      post:
        tags:
          - auth
        summary: Reset user password
        description: This endpoint is used to reset a user's password using a reset code.
        requestBody:
          required: true
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    key:
                      type: string
                      description: The key identifying the type of value (e.g., login, password, confirmPassword, resetCode)
                      enum: [login, password, confirmPassword, resetCode]
                    value:
                      type: string
                      description: The value associated with the key
                  required:
                    - key
                    - value
                example:
                  - key: login
                    value: simon.briaud
                  - key: password
                    value: s@7zaNL#8PABeRNS
                  - key: confirmPassword
                    value: s@7zaNL#8PABeRNS
                  - key: resetCode
                    value: 3ynvse3v
        responses:
          "200":
            description: Successful response
          "404":
            description: Bad request
          "302":
            description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
            headers:
              Location:
                description: URL to which the client is redirected
                schema:
                  type: string
                example: $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /auth/cgu/revalidate:
    put:
      tags:
        - cgu
      summary: Revalidate CGU
      description: Endpoint to revalidate the CGU for an authenticated user.
      responses:
        "200":
          description: No Content - CGU revalidated successfully.
        '400':
          description: Bad Request - CGU revalidation failed.
        '401':
          description: Unauthorized - User is not authorized to revalidate CGU.
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/user/mfa/code:
    get:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
    post:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/session:
    delete:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/generate/otp:
    post:
      tags:
        - auth
      summary: Generate One-Time Password (OTP)
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  otp:
                    type: string
                  otpiat:
                    type: string
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/configure/welcome:
    get:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
    put:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/openid/certs:
    get:
      tags:
        - openid
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/openid/login:
    get:
      tags:
        - openid
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/openid/authenticate:
    get:
      tags:
        - openid
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/openid/mapingUser:
    post:
      tags:
        - openid
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/openid/slo:
    get:
      tags:
        - openid
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/openid/webhook:
    post:
      tags:
        - openid
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/redirect:
    get:
      tags:
        - authðŸš§
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/saml/wayf:
    get:
      tags:
        - saml
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/saml/authn/{providerId}:
    get:
      tags:
        - saml
      summary: ðŸš§ //TODO
      parameters:
        - name: providerId
          in: path
          required: true
          style: simple
          explode: false
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/saml/sso/{providerId}:
    get:
      tags:
        - saml
      summary: ðŸš§ //TODO
      parameters:
        - name: providerId
          in: path
          required: true
          style: simple
          explode: false
          schema:
            type: string
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/saml/redirect/sso:
    get:
      tags:
        - saml
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/saml/post/sso:
    post:
      tags:
        - saml
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/saml/metadata:
    get:
      tags:
        - saml
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/saml/acs:
    post:
      tags:
        - saml
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/saml/slo:
    get:
      tags:
        - saml
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/saml/selectUser:
    get:
      tags:
        - saml
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/
  /auth/test/newdevicemail:
    get:
      tags:
        - saml
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /cas/configuration/reload:
    get:
      tags:
        - cas
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /cas/configuration/mappings/reload:
    get:
      tags:
        - cas
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /cas/configuration/mappings:
    post:
      tags:
        - cas
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /cas/configuration/mappings/:mappingId:
    delete:
      tags:
        - cas
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /cas/configuration/mappings/:mappingId/usage:
    get:
      tags:
        - cas
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /cas/configuration/mappings/:mappingId/usage/:structureId:
    get:
      tags:
        - cas
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /cas/configuration/simulate:
    get:
      tags:
        - cas
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /cas/login:
    get:
      tags:
        - cas
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /cas/oauth/login:
    get:
      tags:
        - cas
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /cas/samlValidate:
    get:
      tags:
        - cas
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /cas/serviceValidate:
    get:
      tags:
        - cas
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

  /cas/proxyValidate:
    get:
      tags:
        - cas
      summary: ðŸš§ //TODO
      responses:
        "200":
          description: Successful response
        "404":
          description: Bad request
        "302":
          description: Authentication failed. HTTP Client is redirected to $SERVER_DOMAIN/auth/login?callback=$SERVER_DOMAIN/

components:
  schemas:
    Error:
      required:
        - message
      type: object
      properties:
        message:
          type: string
          description: A human-readable error message
  securitySchemes:
    oAuth2AuthCode:
      type: oauth2
      description: "For more information, see https://opendigitaleducation.atlassian.net/wiki/spaces/PUBLIC/pages/1184891013/Connecteur+-+SSO+oAuth2"
      flows:
        authorizationCode:
          authorizationUrl: /auth/oauth2/auth
          tokenUrl: /auth/oauth2/token
          scopes:
            userinfo: Get user's identification information
            conversation: Access to conversation API
    BearerAuth:
      type: http
      scheme: bearer
